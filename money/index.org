#+TITLE: Brendan's Money
* Inputs                                                           :noexport:
** Prices
#+begin_src python :results verbatim raw
  import requests
  import os
  from datetime import date
  url = "https://alpha-vantage.p.rapidapi.com/query"
  stocks = [
    "VTSAX",
    "VTIAX",
    "FSPSX",
    "FXAIX"
  ]

  env_key = "RAPID_API_KEY"
  rapid_api_key = os.getenv(env_key)

  return_string = "#+name: prices\n#+begin_src ledger :eval never\n"
  for stock in stocks:
    querystring = {
      "function":"GLOBAL_QUOTE",
      "symbol":stock,
      "datatype":"csv"
    }
    headers = {
      "X-RapidAPI-Key": rapid_api_key,
      "X-RapidAPI-Host": "alpha-vantage.p.rapidapi.com"
    }
    response = requests.request("GET", url, headers=headers, params=querystring)
    csv_text = response.text.split('\r\n')
    headers = csv_text[0].split(',')
    values = csv_text[1].split(',')

    index = -1
    for i, header in enumerate(headers):
      if header == 'price':
	index = i
    if index != -1:
      return_string = return_string + "  P {} 00:00:00 {} ${}".format(date.today().strftime("%m/%d/%Y"), stock, values[index]) + "\n"
  return_string = return_string + "  P {} 00:00:00 {} ${}".format(date.today().strftime("%m/%d/%Y"), "CONDO", "250,000.00") + "\n"
  return_string = return_string + "  P {} 00:00:00 {} ${}".format(date.today().strftime("%m/%d/%Y"), "COTTA", "400,000.00") + "\n"
  return_string = return_string + "#+end_src"
  return return_string
#+end_src

#+RESULTS:
#+name: prices
#+begin_src ledger :eval never
  P 04/24/2023 00:00:00 VTSAX $99.7100
  P 04/24/2023 00:00:00 VTIAX $30.1400
  P 04/24/2023 00:00:00 FSPSX $45.8400
  P 04/24/2023 00:00:00 FXAIX $143.3700
  P 04/24/2023 00:00:00 CONDO $250,000.00
  P 04/24/2023 00:00:00 COTTA $400,000.00
#+end_src

** Transactions
#+name: transactions
#+begin_src ledger :eval never
  2023-04-01 * Kass Property Management
      Expenses:Housing:Rent                 $ 1,328.95
      Assets:Checking:Northwoods           $ -1,328.95

  2023-04-01 * Huntington
      Liabilities:RE:Condo:Mortgage           $ 229.07
      Expenses:RE:Condo:Interest              $ 428.55
      Assets:Checking:RipCo                  $ -657.62

  2023-04-01 * Chase
      Liabilities:RE:Cottage:Mortgage         $ 614.45
      Expenses:RE:Cottage:Interest          $ 1,026.81
      Expenses:RE:Cottage:Escrow              $ 882.36
      Assets:Checking:Northwoods           $ -2,523.62

  2023-04-01 * 2672 N Halsted HOA
      Expenses:RE:Condo:HOA                   $ 132.34
      Assets:Checking:RipCo                  $ -132.34

  2023-04-01 * Zenlord Pro
      Income:RE:Condo:Rent                 $ -1,250.00
      Assets:Checking:RipCo                 $ 1,250.00

  2023-04-02 * Visible
      Expenses:Personal:Communication          $ 35.00
      Assets:Checking:Northwoods              $ -35.00

  2023-04-02 * Target
      Expenses:Food:Groceries                  $ 67.17
      Liabilities:Credit Card:Covantage       $ -67.17

  2023-04-02 * Mariano's
      Expenses:Food:Groceries                   $ 6.37
      Liabilities:Credit Card:Covantage        $ -6.37

  2023-04-02 * Jewel
      Expenses:Food:Groceries                  $ 11.31
      Liabilities:Credit Card:Covantage       $ -11.31

  2023-04-03 * PayRange
      Expenses:Personal:Laundry                $ 25.00
      Liabilities:Credit Card:Covantage       $ -25.00

  2023-04-04 * Transfer
      Assets:Savings:RipCo                    $ 460.04
      Assets:Checking:RipCo                  $ -460.04

  2023-04-05 * Dividend
      Assets:Investments:401K                    1.674 FXAIX
      Assets:Investments:HSA                     0.303 FXAIX
      Income:Extra

  2023-04-06 * Divvy Bikes
      Expenses:Transportation:Biking          $ 119.00
      Liabilities:Credit Card:Covantage      $ -119.00

  2023-04-09 * 7/11
      Expenses:Food:Snacks                     $ 30.00
      Liabilities:Credit Card:Covantage       $ -30.00

  2023-04-10 * Noodles & Company
      Expenses:Food:Fast Food                   $ 8.38
      Liabilities:Credit Card:Covantage        $ -8.38

  2023-04-11 * 7/11
      Expenses:Food:Snacks                      $ 4.20
      Liabilities:Credit Card:Covantage        $ -4.20

  2023-04-13 * Transfer
      Assets:Savings:Northwoods             $ 3,790.00
      Assets:Checking:Northwoods           $ -3,790.00

  2023-04-13 * Spectrum
      Expenses:RE:Cottage:Utilities            $ 69.99
      Assets:Checking:Northwoods              $ -69.99

  2023-04-13 * Wisconsin Public Services
      Expenses:RE:Cottage:Utilities           $ 162.00
      Assets:Checking:Northwoods             $ -162.00

  2023-04-13 * Huntington
      Liabilities:RE:Condo:Mortgage        $ 10,000.00
      Assets:Savings:UFB                  $ -10,000.00

  2023-04-13 * Transfer
      Assets:Savings:RipCo                  $ 2,000.93
      Assets:Savings:UFB                   $ -2,000.93

  2023-04-13 * Transfer
      Assets:Savings:RipCo                  $ 1,400.00
      Assets:Checking:RipCo                $ -1,400.00

  2023-04-14 * Stripe
      Income:Stripe:Paycheck               $ -6,333.77
      Income:Stripe:Wireless                  $ -50.00
      Income:Stripe:Wellness                  $ -51.02
      Assets:Investments:HSA                  $ 220.83
      Expenses:Taxes:Federal                $ 1,161.43
      Expenses:Taxes:Social Security          $ 398.65
      Expenses:Taxes:Medicare                  $ 93.24
      Expenses:Taxes:Illinois                 $ 318.27
      Assets:Investments:401K                 $ 950.07
      Income:Stripe:HSA                      $ -100.00
      Assets:Investments:HSA                  $ 100.00
      Assets:Savings:Covantage              $ 1,042.30
      Assets:Savings:Northwoods             $ 2,250.00

  2023-04-14 * Transfer
      Assets:Savings:Covantage                $ 586.29
      Assets:Savings:Covantage                $ 540.00
      Assets:Checking:Northwoods           $ -1,086.29
      Assets:Checking:Northwoods            $ 2,000.00
      Assets:Savings:Northwoods               $ -40.00
      Assets:Savings:Northwoods            $ -2,000.00
      Assets:Checking:RipCo                 $ 1,400.00
      Assets:Savings:RipCo                 $ -1,400.00
      Assets:Checking:RipCo                $ -1,000.00
      Assets:Savings:Covantage              $ 1,000.00

  2023-04-14 * SWAQ
      Income:SWAQ:Paycheck                   $ -135.18
      Expenses:Taxes:Medicare                   $ 1.96
      Expenses:Taxes:Social Security            $ 8.38
      Expenses:Taxes:Illinois                   $ 6.69
      Assets:Checking:Covantage               $ 118.15

  2023-04-14 * Cash Back
      Income:Extra                            $ -10.00
      Liabilities:Credit Card:Covantage        $ 10.00

  2023-04-14 * Payoff
      Liabilities:Credit Card:Covantage       $ 118.15
      Assets:Checking:Covantage              $ -118.15

  2023-04-18 * TurboTax
      Expenses:Taxes:Tools                    $ 297.57
      Liabilities:Credit Card:Covantage      $ -297.57

  2023-04-18 * DoorDash
      Expenses:Food:Fast Food                  $ 14.99
      Liabilities:Credit Card:Covantage       $ -14.99

  2023-04-19 * Transfer
      Assets:Checking:Park City             $ 1,540.00
      Assets:Checking:Park City             $ 1,000.00
      Assets:Checking:Park City               $ 628.59
      Assets:Savings:Covantage             $ -3,168.59

  2023-04-19 * Federal Income Taxes
      Expenses:Taxes:Federal                $ 2,208.00
      Assets:Savings:Northwoods            $ -2,208.00

  2023-04-19 * Broken Barrel
      Expenses:Food:Restaurants                 $ 9.04
      Expenses:Food:Restaurants                $ 19.58
      Liabilities:Credit Card:Covantage       $ -28.62

  2023-04-19 * Jewel
      Expenses:Food:Groceries                  $ 34.28
      Liabilities:Credit Card:Covantage       $ -34.28

  2023-04-19 * Taco Bell
      Expenses:Food:Fast Food                   $ 2.45
      Liabilities:Credit Card:Covantage        $ -2.45

  2023-04-19 * Away Luggage
      Expenses:Gifts                          $ 303.19
      Liabilities:Credit Card:Covantage      $ -303.19

  2023-04-19 * Lyft
      Expenses:Transportation:Divvy             $ 0.34
      Liabilities:Credit Card:Covantage

  2023-04-23 * Dollar Tree
      Expenses:Personal:Household               $ 9.65
      Liabilities:Credit Card:Covantage

  2023-04-23 * Panera Bread
      Expenses:Food:Fast Food                   $ 3.65
      Liabilities:Credit Card:Covantage

  2023-04-23 * Stratechery
      Expenses:Personal:Learning              $ 120.00
      Liabilities:Credit Card:Covantage

  2023-04-23 * PayRange
      Expenses:Personal:Laundry                $ 25.00
      Liabilities:Credit Card:Covantage       $ -25.00

  2023-04-23 * Divvy Bikes
      Expenses:Transportation:Divvy             $ 1.18
      Expenses:Transportation:Divvy             $ 3.53
      Liabilities:Credit Card:Covantage
#+end_src
** Initial Balance
#+name: opening_balance
#+begin_src ledger :eval never
  2023-04-01 * Initial Balance
      Assets:Checking:Northwoods            $ 9,495.85
      Assets:Checking:RipCo                 $ 3,250.00
      Assets:Savings:Northwoods             $ 5,000.00
      Assets:Savings:RipCo                  $ 1,999.99
      Assets:Savings:UFB                   $ 12,000.93
      Assets:Investments:401K                  354.536 FSPSX
      Assets:Investments:401K                  441.706 FXAIX
      Assets:Investments:HSA                    79.982 FXAIX
      Assets:Investments:IRA                   528.079 VTIAX
      Assets:Investments:IRA                   675.302 VTSAX
      Assets:RE:Condo                              1.0 CONDO
      Assets:RE:Cottage                            1.0 COTTA
      Liabilities:RE:Condo:Mortgage      $ -137,137.20
      Liabilities:RE:Cottage:Mortgage    $ -352,049.77
      Equity:OpeningBalance
#+end_src
* Money
** Net Worth
*** Assets
#+begin_src ledger :noweb yes :cmdline bal ^Assets ^Liabilities --cleared :exports results
  <<opening_balance>>
  <<transactions>>
#+end_src
#+results:
#+begin_example
         $ 20,442.45
           1.0 CONDO
           1.0 COTTA
       354.536 FSPSX
       523.665 FXAIX
       528.079 VTIAX
       675.302 VTSAX  Assets
          $ 7,918.59    Checking
          $ 2,500.00      Northwoods
          $ 3,168.59      Park City
          $ 2,250.00      RipCo
          $ 1,270.90
       354.536 FSPSX
       523.665 FXAIX
       528.079 VTIAX
       675.302 VTSAX    Investments
            $ 950.07
       354.536 FSPSX
       443.380 FXAIX      401K
            $ 320.83
        80.285 FXAIX      HSA
       528.079 VTIAX
       675.302 VTSAX      IRA
           1.0 CONDO
           1.0 COTTA    RE
           1.0 CONDO      Condo
           1.0 COTTA      Cottage
         $ 11,252.96    Savings
          $ 6,792.00      Northwoods
          $ 4,460.96      RipCo
       $ -479,331.18  Liabilities
           $ -987.73    Credit Card:Covantage
       $ -478,343.45    RE
       $ -126,908.13      Condo:Mortgage
       $ -351,435.32      Cottage:Mortgage
--------------------
       $ -458,888.73
           1.0 CONDO
           1.0 COTTA
       354.536 FSPSX
       523.665 FXAIX
       528.079 VTIAX
       675.302 VTSAX
#+end_example
*** Value
#+begin_src ledger :noweb yes :cmdline bal ^Assets ^Liabilities --cleared --market :exports results
  <<prices>>
  <<opening_balance>>
  <<transactions>>
#+end_src
#+RESULTS:
#+begin_example
        $ 845,022.89  Assets
          $ 7,918.59    Checking
          $ 2,500.00      Northwoods
          $ 3,168.59      Park City
          $ 2,250.00      RipCo
        $ 175,851.34    Investments
         $ 80,769.39      401K
         $ 11,831.29      HSA
         $ 83,250.66      IRA
        $ 650,000.00    RE
        $ 250,000.00      Condo
        $ 400,000.00      Cottage
         $ 11,252.96    Savings
          $ 6,792.00      Northwoods
          $ 4,460.96      RipCo
       $ -479,331.18  Liabilities
           $ -987.73    Credit Card:Covantage
       $ -478,343.45    RE
       $ -126,908.13      Condo:Mortgage
       $ -351,435.32      Cottage:Mortgage
--------------------
        $ 365,691.71
#+end_example
** Spending
*** Monthly Spending
#+begin_src ledger :cmdline reg ^Expenses and not Taxes -MnA --sort date --format "%-15(format_date(date, '%B %Y')) %(amount)\n" :noweb yes :exports results
  <<opening_balance>>
  <<transactions>>
#+end_src
#+results:
: April 2023      $ 4,884.31
*** Transactions
#+begin_src ledger :cmdline reg ^Expenses ^Income --sort -date --format "%-15(format_date(date, '%B %d %Y'))%-33(payee)%-33(account)%(amount)\n" :noweb yes :exports results
  <<opening_balance>>
  <<transactions>>
#+end_src
#+results:
#+begin_example
April 23 2023  Dollar Tree                      Expenses:Personal:Household      $ 9.65
April 23 2023  Panera Bread                     Expenses:Food:Fast Food          $ 3.65
April 23 2023  Stratechery                      Expenses:Personal:Learning       $ 120.00
April 23 2023  PayRange                         Expenses:Personal:Laundry        $ 25.00
April 23 2023  Divvy Bikes                      Expenses:Transportation:Divvy    $ 1.18
April 23 2023  Divvy Bikes                      Expenses:Transportation:Divvy    $ 3.53
April 19 2023  Federal Income Taxes             Expenses:Taxes:Federal           $ 2,208.00
April 19 2023  Broken Barrel                    Expenses:Food:Restaurants        $ 9.04
April 19 2023  Broken Barrel                    Expenses:Food:Restaurants        $ 19.58
April 19 2023  Jewel                            Expenses:Food:Groceries          $ 34.28
April 19 2023  Taco Bell                        Expenses:Food:Fast Food          $ 2.45
April 19 2023  Away Luggage                     Expenses:Gifts                   $ 303.19
April 19 2023  Lyft                             Expenses:Transportation:Divvy    $ 0.34
April 18 2023  TurboTax                         Expenses:Taxes:Tools             $ 297.57
April 18 2023  DoorDash                         Expenses:Food:Fast Food          $ 14.99
April 14 2023  Stripe                           Income:Stripe:Paycheck           $ -6,333.77
April 14 2023  Stripe                           Income:Stripe:Wireless           $ -50.00
April 14 2023  Stripe                           Income:Stripe:Wellness           $ -51.02
April 14 2023  Stripe                           Expenses:Taxes:Federal           $ 1,161.43
April 14 2023  Stripe                           Expenses:Taxes:Social Security   $ 398.65
April 14 2023  Stripe                           Expenses:Taxes:Medicare          $ 93.24
April 14 2023  Stripe                           Expenses:Taxes:Illinois          $ 318.27
April 14 2023  Stripe                           Income:Stripe:HSA                $ -100.00
April 14 2023  SWAQ                             Income:SWAQ:Paycheck             $ -135.18
April 14 2023  SWAQ                             Expenses:Taxes:Medicare          $ 1.96
April 14 2023  SWAQ                             Expenses:Taxes:Social Security   $ 8.38
April 14 2023  SWAQ                             Expenses:Taxes:Illinois          $ 6.69
April 14 2023  Cash Back                        Income:Extra                     $ -10.00
April 13 2023  Spectrum                         Expenses:RE:Cottage:Utilities    $ 69.99
April 13 2023  Wisconsin Public Services        Expenses:RE:Cottage:Utilities    $ 162.00
April 11 2023  7/11                             Expenses:Food:Snacks             $ 4.20
April 10 2023  Noodles & Company                Expenses:Food:Fast Food          $ 8.38
April 09 2023  7/11                             Expenses:Food:Snacks             $ 30.00
April 06 2023  Divvy Bikes                      Expenses:Transportation:Biking   $ 119.00
April 05 2023  Dividend                         Income:Extra                     -1.977 FXAIX
April 03 2023  PayRange                         Expenses:Personal:Laundry        $ 25.00
April 02 2023  Visible                          Expenses:Personal:Communication  $ 35.00
April 02 2023  Target                           Expenses:Food:Groceries          $ 67.17
April 02 2023  Mariano's                        Expenses:Food:Groceries          $ 6.37
April 02 2023  Jewel                            Expenses:Food:Groceries          $ 11.31
April 01 2023  Kass Property Management         Expenses:Housing:Rent            $ 1,328.95
April 01 2023  Huntington                       Expenses:RE:Condo:Interest       $ 428.55
April 01 2023  Chase                            Expenses:RE:Cottage:Interest     $ 1,026.81
April 01 2023  Chase                            Expenses:RE:Cottage:Escrow       $ 882.36
April 01 2023  2672 N Halsted HOA               Expenses:RE:Condo:HOA            $ 132.34
April 01 2023  Zenlord Pro                      Income:RE:Condo:Rent             $ -1,250.00
#+end_example
